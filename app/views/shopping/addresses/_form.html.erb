<%= form_for(@address) do |f| %>

    <%= render 'shared/error_messages', record: @address, h2_msg: 'stopped this delivery address from being saved:'%>

    <table align='center' class='field'>
      <tr>
        <td><%= f.label :first_name %></td>
        <td><%= f.text_field :first_name %></td>
      </tr>

      <tr>
        <td><%= f.label :last_name %></td>
        <td><%= f.text_field :last_name %></td>
      </tr>

      <tr>
        <td><%= f.label :email %></td>
        <td><%= f.text_field :email %></td>
      </tr>

      <tr>
        <td><%= f.label 'Email again, please!' %></td>
        <td><%= f.text_field :email_confirmation %></td>
      </tr>

      <tr>
        <td><%= f.label :phone %></td>
        <td><%= f.phone_field :phone, value: number_to_phone(@address.phone, area_code: true) %> for questions about your order</td>
      </tr>


      <tr>
        <td><%= f.label :address1 %></td>
        <td><%= f.text_field :address1 %></td>
      </tr>

      <tr>
        <td><%= f.label :address2 %></td>
        <td><%= f.text_field :address2 %></td>
      </tr>

      <tr>
        <td><%= f.label :city %></td>
        <td><%= f.text_field :city %></td>
      </tr>

      <tr>
        <td><%= f.label :state_id %></td>
        <td><%= f.select :state_id, @states, {}, {include_blank: false, style: 'padding: 9px;'} %></td>
      </tr>

      <tr>
        <td><%= f.label :zip_code %></td>
        <td><%= f.text_field :zip_code, size: 10 %></td>
      </tr>

      <tr>
        <td><%= f.label :country %></td>
        <td><%= f.text_field :country %></td>
      </tr>

      <tr>
        <td>&nbsp;</td>
        <td><span id="QadBusy"></span></td>
      </tr>


    </table>

    <div class="field">
      <%= f.hidden_field :cart_id, value: @cart.id %>
    </div>

    <div class="actions">
      <%= f.submit t(:shopping_submit_address), id: 'my_submit' %>
      <span id="spinner" style="display:none"></span>
    </div>

<% end %>

<%= javascript_tag do %>
    QadApi(
    {timeout: 10, key: 99020784, busySubmit: false, autoClean: true},
    {busyId: 'QadBusy', busyText: 'Validating address...'},
    [{name: "Delivery Address",
    street: 'shopping_address_address1',
    unit: 'shopping_address_address2',
    city: 'shopping_address_city',
    state: 'shopping_address_state',
    zip: 'shopping_address_zip_code',
    country: 'shopping_address_country'}]);
<% end %>